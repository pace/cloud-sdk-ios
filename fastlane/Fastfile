default_platform(:ios)

platform :ios do
  before_all do
    carthage(command: 'bootstrap', cache_builds: true,  platform: 'iOS', use_binaries: false)
  end
  
  desc 'Run tests'
  lane :test do
    scan(
      project: 'PACECloudSDK.xcodeproj',
      scheme: 'PACECloudSDKTests',
      reset_simulator: true, 
      force_quit_simulator: true, 
      prelaunch_simulator: true, 
      reinstall_app: true
    )
  end

  lane :set_version do |options|
    set_info_plist_value(path: 'PACECloudSDK/Info.plist', key: 'CFBundleShortVersionString', value: options[:version_number])
  end
end
