//
// Generated by SwiftPoet
// https://github.com/outfoxx/swiftpoet
//
import Foundation

public extension API.Communication {
    /**
     * Requests the current user location as provided by e.g. GPS.
     */
    struct GetLocationResponse: Codable {
        public let lat: Double
        public let lon: Double
        public let accuracy: Double?
        /**
         * The bearing of the current location in degress to the true north.
         * Thus, north is 0 and 360 degrees, east is 90 degrees, south is 180 degrees, west 270 degrees.
         * A negative value indicates an invalid direction.
         */
        public let bearing: Double?

        public init(lat: Double, lon: Double, accuracy: Double?, bearing: Double?) {
            self.lat = lat
            self.lon = lon
            self.accuracy = accuracy
            self.bearing = bearing
        }
    }
}

extension API.Communication {
    class GetLocationError: Error {}

    class GetLocationResult: Result {
        init(_ success: Success) {
            super.init(status: 200, body: .init(success.response))
        }

        init(_ failure: Failure) {
            super.init(status: failure.statusCode.rawValue, body: .init(failure.response))
        }

        struct Success {
            let response: GetLocationResponse
        }

        struct Failure {
            let statusCode: StatusCode
            let response: GetLocationError

            enum StatusCode: Int {
                case badRequest = 400
                case forbidden = 403
                case notFound = 404
                case requestTimeout = 408
                case internalServerError = 500
            }
        }
    }
}
